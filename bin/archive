#!/bin/sh

set -e
readonly PROJECT_ROOT="$(dirname "$0")/.."

# shellcheck source=lib/defaults.sh
. "${PROJECT_ROOT}/lib/defaults.sh"

# shellcheck source=lib/archive.sh
. "${PROJECT_ROOT}/lib/archive.sh"

# shellcheck source=lib/manage_archive.sh
. "${PROJECT_ROOT}/lib/manage_archive.sh"

# shellcheck source=lib/informative.sh
. "${PROJECT_ROOT}/lib/informative.sh"

# shellcheck source=lib/help.sh
. "${PROJECT_ROOT}/lib/help.sh"


# ==================
#  Main entry point
# ==================


# Sets $action, $file, $remove_files
if ! parse_options "$@"; then
  usage
  exit 1
fi

case "${action}" in
  add) add_to_archive "${file}" "${remove_files}" 
    ;;
  list) 
    # shellcheck disable=SC2119
    list 
    ;;
  help) help ;;
  usage) usage ;;
  *) 
    usage
    exit 1 ;;
esac
